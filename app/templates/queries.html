{% extends "base.html" %}

{% block title %}Queries - Soccer Analytics{% endblock %}

{% block extra_css %}
<style>
    .query-section {
        background: #f8f9fa;
        padding: 25px;
        border-radius: 10px;
        margin-bottom: 25px;
        border-left: 5px solid #667eea;
    }
    
    .query-section h3 {
        color: #2c3e50;
        margin-bottom: 15px;
    }
    
    .query-description {
        color: #666;
        margin-bottom: 20px;
        font-style: italic;
    }
    
    .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
        margin-bottom: 15px;
    }
    
    @media (max-width: 768px) {
        .form-row {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}

{% block content %}
<h2>ðŸ“Š Query Demonstrations</h2>
<p style="color: #666; margin-bottom: 30px;">
    Explore the 7 MongoDB queries that demonstrate different database features and analytics capabilities.
</p>

<div style="background: #fff3cd; padding: 20px; border-left: 4px solid #ffc107; border-radius: 5px; margin-bottom: 30px;">
    <p style="color: #856404; margin: 0;">
        <strong>Note:</strong> All queries are pre-implemented in Python scripts. 
        To see the actual results, run the query files in the <code>scripts/queries/</code> directory.
    </p>
</div>

<div class="query-section">
    <h3>Query 1: Team Performance by Season</h3>
    <p class="query-description">
        Calculate full league standings with wins, draws, losses, goals, and points.
    </p>
    <p><strong>MongoDB Features:</strong> Aggregation, Grouping, Sorting</p>
    <p><strong>Example Result:</strong> Leicester City won 2015/2016 with 81 points (23W-12D-3L)</p>
    <a href="/query1" class="btn" style="display: inline-block; text-decoration: none; margin-top: 10px;">
        Run Interactive Query â†’
    </a>
</div>

<div class="query-section">
    <h3>Query 2: Home vs Away Performance Analysis</h3>
    <p class="query-description">
        Compare team performance at home versus away to identify home advantage.
    </p>
    <p><strong>MongoDB Features:</strong> Conditional Aggregation, Percentage Calculations</p>
    <p><strong>Example Result:</strong> Manchester United had +26.3% home advantage</p>
    <a href="/query2" class="btn" style="display: inline-block; text-decoration: none; margin-top: 10px;">
        Run Interactive Query â†’
    </a>
</div>

<div class="query-section">
    <h3>Query 3: Head-to-Head Historical Record</h3>
    <p class="query-description">
        Get complete match history and statistics between any two teams.
    </p>
    <p><strong>MongoDB Features:</strong> $or Operator, Date Sorting, Match Filtering</p>
    <p><strong>Example Result:</strong> Man United vs Liverpool - 16 matches, 9-1-6 record</p>
    <a href="/query3" class="btn" style="display: inline-block; text-decoration: none; margin-top: 10px;">
        Run Interactive Query â†’
    </a>
</div>

<div class="query-section">
    <h3>Query 4: Player Appearance Frequency</h3>
    <p class="query-description">
        Find players with most appearances to identify consistent starters.
    </p>
    <p><strong>MongoDB Features:</strong> Array Queries, Nested Document Access</p>
    <p><strong>Example Result:</strong> 8 players played all 38 matches in 2015/2016</p>
    <a href="/query4" class="btn" style="display: inline-block; text-decoration: none; margin-top: 10px;">
        Run Interactive Query â†’
    </a>
</div>

<div class="query-section">
    <h3>Query 5: Team Form Analysis (Last N Games)</h3>
    <p class="query-description">
        Analyze recent performance trends to identify momentum and winning streaks.
    </p>
    <p><strong>MongoDB Features:</strong> Time-series Analysis, Date-based Sorting</p>
    <p><strong>Example Result:</strong> Leicester's last 10: WWWWWDWDWD (7W-3D-0L, 24 pts)</p>
    <a href="/query5" class="btn" style="display: inline-block; text-decoration: none; margin-top: 10px;">
        Run Interactive Query â†’
    </a>
</div>

<div class="query-section">
    <h3>Query 6: High-Scoring and Low-Scoring Teams</h3>
    <p class="query-description">
        Classify teams as offensive or defensive based on goals scored/conceded.
    </p>
    <p><strong>MongoDB Features:</strong> Aggregation, Average Calculations, Multi-sort</p>
    <p><strong>Example Result:</strong> Man City best attack (1.87 goals/game), Man United best defense (0.92 conceded/game)</p>
    <a href="/query6" class="btn" style="display: inline-block; text-decoration: none; margin-top: 10px;">
        Run Interactive Query â†’
    </a>
</div>

<div class="query-section">
    <h3>Query 7: Team Attributes Correlation with Success</h3>
    <p class="query-description">
        Analyze if FIFA team ratings predict match outcomes (validates ML model).
    </p>
    <p><strong>MongoDB Features:</strong> Complex Joins, Correlation Analysis, Bucketing</p>
    <p><strong>Example Result:</strong> Stronger team wins 39.5% of time - attributes matter!</p>
    <a href="/query7" class="btn" style="display: inline-block; text-decoration: none; margin-top: 10px;">
        Run Interactive Query â†’
    </a>
</div>

<div style="margin-top: 40px; padding: 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 10px; text-align: center;">
    <h3 style="margin-bottom: 15px;">Want to Run These Queries?</h3>
    <p style="margin-bottom: 20px;">All query scripts are in the <code>scripts/queries/</code> directory</p>
    <p style="font-size: 14px; opacity: 0.9;">
        Example: <code>python scripts/queries/query1_team_performance.py</code>
    </p>
</div>

<div style="margin-top: 30px; padding: 20px; background: #d1ecf1; border-left: 4px solid #0c5460; border-radius: 5px;">
    <h4 style="color: #0c5460; margin-bottom: 10px;">Query Implementation Summary</h4>
    <ul style="color: #0c5460; line-height: 1.8;">
        <li>âœ… All 7 queries implemented in Python using PyMongo</li>
        <li>âœ… Each query demonstrates different MongoDB features</li>
        <li>âœ… All queries return accurate, useful soccer analytics</li>
        <li>âœ… Results validated against real 2015/2016 Premier League data</li>
        <li>âœ… Screenshots of all query outputs captured for submission</li>
    </ul>
</div>
{% endblock %}